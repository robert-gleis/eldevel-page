---
import { content } from '../content/de.ts';
---

<header class="navbar">
  <div class="container-custom">
    <div class="flex items-center justify-between h-16 md:h-20">
      
      <!-- Logo/Brand -->
      <div class="flex items-center">
        <a href="#" class="flex items-center">
                             <img 
                     src="/images/eldevel-logo.png" 
                     alt="eldevel – Electronics Development"
                     class="h-10 md:h-12 w-auto"
                     loading="eager"
                   />
        </a>
      </div>

      <!-- Desktop Navigation -->
      <nav class="hidden md:flex items-center space-x-8">
        <a href="#unternehmen" class="nav-link">{content.navigation.company}</a>
        <a href="#leistungen" class="nav-link">{content.navigation.services}</a>
        <a href="#prozess" class="nav-link">{content.navigation.process}</a>
        <a href="#kontakt" class="nav-link">{content.navigation.contact}</a>
      </nav>

      <!-- Desktop CTA + Dark Mode -->
      <div class="hidden md:flex items-center space-x-4">
        <button 
          id="dark-mode-toggle" 
          class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors"
          aria-label="Toggle dark mode"
        >
          <svg class="w-5 h-5 hidden dark:block" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
          </svg>
          <svg class="w-5 h-5 block dark:hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
          </svg>
        </button>
        <a href="#kontakt" class="btn-primary">
          {content.hero.cta_primary}
        </a>
      </div>

      <!-- Mobile Menu Button -->
      <button 
        id="mobile-menu-toggle" 
        class="md:hidden p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors"
        aria-label="Toggle mobile menu"
      >
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      </button>
    </div>
  </div>
</header>

<!-- Mobile Menu -->
<div id="mobile-menu" class="mobile-menu mobile-menu-closed">
  <div class="flex flex-col h-full">
    
    <!-- Mobile Header -->
    <div class="flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700">
      <div class="flex items-center">
                         <img 
                   src="/images/eldevel-logo.png" 
                   alt="eldevel – Electronics Development"
                   class="h-10 w-auto"
                   loading="eager"
                 />
      </div>
      <button 
        id="mobile-menu-close" 
        class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors"
        aria-label="Close mobile menu"
      >
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
        </svg>
      </button>
    </div>

    <!-- Mobile Navigation -->
    <nav class="flex-1 px-4 py-6 space-y-4">
      <a href="#unternehmen" class="mobile-nav-link">{content.navigation.company}</a>
      <a href="#leistungen" class="mobile-nav-link">{content.navigation.services}</a>
      <a href="#prozess" class="mobile-nav-link">{content.navigation.process}</a>
      <a href="#kontakt" class="mobile-nav-link">{content.navigation.contact}</a>
    </nav>

    <!-- Mobile Footer -->
    <div class="p-4 border-t border-gray-200 dark:border-gray-700 space-y-4">
      <div class="flex items-center justify-between">
        <span class="text-sm text-gray-600 dark:text-gray-400">Theme</span>
        <button 
          id="mobile-dark-mode-toggle" 
          class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors"
          aria-label="Toggle dark mode"
        >
          <svg class="w-5 h-5 hidden dark:block" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
          </svg>
          <svg class="w-5 h-5 block dark:hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
          </svg>
        </button>
      </div>
      <a href="#kontakt" class="btn-primary w-full text-center">
        {content.hero.cta_primary}
      </a>
    </div>
  </div>
</div>

<!-- Navigation & Dark Mode JavaScript -->
<script>
  // Mobile Menu Toggle
  const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
  const mobileMenuClose = document.getElementById('mobile-menu-close');
  const mobileMenu = document.getElementById('mobile-menu');

  function openMobileMenu() {
    mobileMenu?.classList.remove('mobile-menu-closed');
    mobileMenu?.classList.add('mobile-menu-open');
    document.body.style.overflow = 'hidden';
  }

  function closeMobileMenu() {
    mobileMenu?.classList.remove('mobile-menu-open');
    mobileMenu?.classList.add('mobile-menu-closed');
    document.body.style.overflow = '';
  }

  mobileMenuToggle?.addEventListener('click', openMobileMenu);
  mobileMenuClose?.addEventListener('click', closeMobileMenu);

  // Close mobile menu when clicking on navigation links
  const mobileNavLinks = document.querySelectorAll('.mobile-nav-link');
  mobileNavLinks.forEach(link => {
    link.addEventListener('click', closeMobileMenu);
  });

  // Dark Mode Toggle
  function initDarkMode() {
    const savedTheme = localStorage.getItem('theme');
    const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    
    if (savedTheme === 'dark' || (!savedTheme && systemPrefersDark)) {
      document.documentElement.classList.add('dark');
    }
  }

  function toggleDarkMode() {
    document.documentElement.classList.toggle('dark');
    const isDark = document.documentElement.classList.contains('dark');
    localStorage.setItem('theme', isDark ? 'dark' : 'light');
  }

  // Initialize dark mode on page load
  initDarkMode();

  // Dark mode toggle buttons
  const darkModeToggle = document.getElementById('dark-mode-toggle');
  const mobileDarkModeToggle = document.getElementById('mobile-dark-mode-toggle');

  darkModeToggle?.addEventListener('click', toggleDarkMode);
  mobileDarkModeToggle?.addEventListener('click', toggleDarkMode);

  // Close mobile menu on escape key
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      closeMobileMenu();
    }
  });

  // Close mobile menu when clicking outside
  mobileMenu?.addEventListener('click', (e) => {
    if (e.target === mobileMenu) {
      closeMobileMenu();
    }
  });
</script>

<style>
  .nav-link {
    @apply text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 font-medium transition-colors;
  }

  .mobile-nav-link {
    @apply block text-lg font-medium text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 py-3 transition-colors;
  }

  .mobile-menu-closed {
    transform: translateX(100%);
  }

  .mobile-menu-open {
    transform: translateX(0);
  }
</style>
